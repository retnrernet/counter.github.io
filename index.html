<!DOCTYPE html>
<html>
<head>
  <!--<link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" />-->
  <script defer src="https://pyscript.net/alpha/pyscript.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
  <div>Дата сегодня:<u><label id='time'></label></u></div><br>
  <div>Введите название изделия и тип операции или выберите из списка</div>
  <select name="izdelia" id="izdelia">
    <option value="Комбинезон">Комбинезон</option>
    <option value="Юбка">Юбка</option>
    <option value="Лосины">Лосины</option>
    <option value="Леггинсы">Леггинсы</option>
    <option value="Платье">Платье</option>
    <option value="Рашгард">Рашгард</option>
    <option value="Водолазка">Водолазка</option>
    <option value="Шорты">Шорты</option>
    <option value="Футболка">Футболка</option>
    <option value="Топ">Топ</option>
    <option value="Купальник">Купальник</option>
    <option value="Брюки">Брюки</option>
    <option value="Бюстгалтер">Бюстгалтер</option>
    <option value="Трусы">Трусы</option>
    <option value="Сарафан">Сарафан</option>
    <option value="Боди">Боди</option>
    <option value="Иное">Иное</option>
  </select>
  <select name="operation" id="operation">
    <option value="Обметать боковые срезы">Обметать бок срезы</option>
    <option value="Вывести концы нитей, протянуть эласт">Вывести концы нитей</option>
    <option value="Стачать эластичную ленту">Стачать эластичную ленту</option>
    <option value="Разложить припуск шва">Разложить припуск шва</option>
    <option value="Наметить место размерника">Наметить место размерника</option>
    <option value="Настрочить размерник">Настрочить размерник</option>
    <option value="Приложить отделочную строчку">Приложить отделочную строчку</option>
    <option value="Наметить контрольные точки">Наметить контрольные точки</option>
    <option value="Настрочить фирмичку">Настрочить фирмичку</option>
    <option value="Закрепить верхнюю часть">Закрепить верхнюю часть</option>
    <option value="Притачать составник">Притачать составник</option>
    <option value="Поставить П-образные закрепки">Поставить П-образные закрепки</option>
    <option value="Скрепить деталь полочки верха">Скрепить деталь полочки верха</option>
    <option value="Вложить боковые срезы">Вложить боковые среды</option>
    <option value="Иное">Иное</option>
  </select>
  <input type="name" id="name"/>
  <div>Введите количество</div>
  <input type="num" id="num"/>
  <div>Введите стоимость за единицу (в формате 0.5 или 5)</div>
  <input type="price" id="price"/>
  <button id="submit-button" type="submit" pys-onClick="my_function">OK</button><br><br>
  <div>Ранее:</div><br>
  <div id="output"></div><br>
  <div>Всего заработано в рублях:</div><br>
  <div id="full"></div>
<py-script>
  from datetime import datetime;import js, asyncio,json;from js import document, console, Object;from os import path, getcwd
  #response = await js.axios.get("https://raw.githubusercontent.com/retnrernet/counter.github.io/main/out.txt")
  #Element('output').element.innerText = response.data
  now = datetime.now()
  Element('time').element.innerText = now.strftime("%d/%m/%Y")
  try:Element('output').element.innerText = js.localStorage.getItem("ss");Element('full').element.innerText = js.localStorage.getItem("full")
  except:pass
  def my_function(*args, **kwargs):
    name = Element('name').element.value
    num = Element('num').element.value
    price = Element('price').element.value
    izdelia= Element('izdelia').element.value
    operation= Element('operation').element.value
    try:js.localStorage.setItem("ss", js.localStorage.getItem("ss")+"\n"+izdelia+","+operation+","+name+","+num+","+str(int(num)*float(price))+" руб. итоговая выручка, дата"+now.strftime("%d/%m/%Y"))
    except:js.localStorage.setItem("ss",izdelia+","+operation+","+name+","+num+","+str(int(num)*float(price))+" руб. итоговая выручка, дата"+now.strftime("%d/%m/%Y"))
    Element('output').element.innerText = js.localStorage.getItem("ss")
    try:js.localStorage.setItem("full", float(js.localStorage.getItem("full"))+(int(num)*float(price)))
    except:js.localStorage.setItem("full", int(num)*float(price))
    Element('full').element.innerText = js.localStorage.getItem("full")
    #sessionStorage.removeItem('username')
</py-script>
  </body>
</html>
